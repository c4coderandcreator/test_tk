# name: Generate a build and push to another branch

# on:
#   push:
#     branches:
#       - main
#   workflow_dispatch: # This allows manual triggering of the workflow

# permissions:
#   contents: write

# jobs:
#   build:
#     runs-on: ubuntu-latest
#     name: Build and Push
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v2

#       - name: Install all dependencies
#         run: npm install

#       - name: Build
#         run: npm run build # The build command of your project

#       - name: Push to build branch
#         uses: s0/git-publish-subdir-action@develop
#         env:
#           REPO: self
#           BRANCH: build # The branch name where you want to push the assets
#           FOLDER: dist # The directory where your assets are generated
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # GitHub will automatically add this - you don't need to bother getting a token
#           MESSAGE: "Build: ({sha}) {msg}" # The commit message

name: Deploy to name.com

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install SSH
        run: |
          sudo apt-get update
          sudo apt-get install -y ssh

      - name: Setup SSH
        uses: webfactory/ssh-agent@v0.5.3
        with:
          ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

      - name: Copy files to server
        run: |
          scp -r ./index.html ./style.css username@name.com:/home/user/public_html/
